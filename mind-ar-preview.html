<!-- 
<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script> <script> const show = () => { document.querySelector("#video").play(); }

  AFRAME.registerComponent('mytarget', {
      init: function () {
        this.el.addEventListener('targetFound', event => {
          console.log("target found");
          show();
        });
        this.el.addEventListener('targetLost', event => {
          console.log("target found");
        });
      }
    });
  
  </script>
  
  <a-scene mindar-image="imageTargetSrc: https://avmtechnology.ru/test/WebAR/media/postcards/targets.mind; filterMinCF:0.00001; filterBeta:1; missTolerance:30" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false">
      <a-assets>
      
      <video id="video" autoplay loop="true" src="https://avmtechnology.ru/test/WebAR/media/postcards/night.webm"></video>
  </a-assets>
  
    <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
  
      <a-entity id="mytarget" mytarget mindar-image-target="targetIndex: 0">
          <a-video src="#video" position="0 0 0" rotation="0 0 0" width="1.0" height="0.6"></a-video>
      </a-entity>
  </a-scene>
   -->
   <!DOCTYPE html>
   <html>
     <head>
       <meta name="viewport" content="width=device-width, initial-scale=1" />
       <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
       <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
       <script>
         const playVideo = () => {
           const video = document.querySelector("#video");
           if (video && video.paused) {
             video.play().catch((error) => {
               console.error("Ошибка воспроизведения видео:", error);
             });
           }
         };
   
         const pauseVideo = () => {
           const video = document.querySelector("#video");
           if (video && !video.paused) {
             video.pause();
           }
         };
   
         AFRAME.registerComponent("mytarget", {
           init: function () {
             this.el.addEventListener("targetFound", () => {
               console.log("Цель найдена");
               playVideo();
             });
   
             this.el.addEventListener("targetLost", () => {
               console.log("Цель потеряна");
               pauseVideo();
             });
           },
         });
   
         document.addEventListener("click", () => {
           // Разрешаем видео играть после взаимодействия с пользователем
           playVideo();
         });
       </script>
     </head>
     <body>
       <a-scene
         mindar-image="imageTargetSrc: https://avmtechnology.ru/test/WebAR/media/postcards/targets.mind; filterMinCF:0.00001; filterBeta:1; missTolerance:30"
         color-space="sRGB"
         renderer="colorManagement: true, physicallyCorrectLights"
         vr-mode-ui="enabled: false"
         device-orientation-permission-ui="enabled: false"
       >
         <a-assets>
           <img
             id="card"
             src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.5/examples/image-tracking/assets/card-example/card.png"
           />
           <video
             id="video"
             loop
             muted
             playsinline
             crossorigin="anonymous"
             src="https://dvvan696.github.io/Cards.github.io/1.mp4"
           ></video>
         </a-assets>
   
         <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
   
         <a-entity mytarget mindar-image-target="targetIndex: 0">
           <a-plane
             src="#card"
             position="0 0 0"
             height="0.552"
             width="1"
             rotation="0 0 0"
           ></a-plane>
           <a-video
             src="#video"
             position="0 0 0.1"
             width="1"
             height="0.5625"
             rotation="0 0 0"
           ></a-video>
         </a-entity>
       </a-scene>
     </body>
   </html>
   